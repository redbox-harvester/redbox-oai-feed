## BEGIN PORTING THIS TEMPLATE FOR HARVESTER
## Lines below inject our data and notify util of this script's format, useful when accessing constants
#set($util = $data.get('util'))
#set($systemConfig = $data.get('systemConfig'))
#set($item = $data)
#set($object = $data)
$util.setData($data)
$util.setFormat("oai_dc")
## END PORTING THIS TEMPLATE FOR HARVESTER
#set($defaultOnError = "&Invalid XML placeholder... prevents ANDS Harvesting records in error&")
##### START Identifier resolution
#set($pidProperty = $systemConfig.getString($defaultOnError, "curation", "pidProperty"))
#set ($pid = $util.getMetadata($object, $pidProperty))
#if ("$!pid" == "")
    #set ($pid = $util.get($item, "metadata", "rdf:resource"))
    #if ("$!pid" == "")
        #set ($pid = $util.get($item, "metadata", "dc.identifier"))
    #end
#end
##### END Identifier resolution

<oai_dc:dc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd" 
    xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" 
    xmlns:dc="http://purl.org/dc/elements/1.1/">

    <dc:identifier>$util.encodeXml($pid)</dc:identifier>
    #set ($name = "$util.encodeXml($util.get($item, 'data', 'Honorific')) $util.encodeXml($util.get($item, 'data', 'Given_Name')) $util.encodeXml($util.get($item, 'data', 'Family_Name'))")
    <dc:title>$name</dc:title>
    <dc:description>'Parties' entry for '$name'</dc:description>

</oai_dc:dc>